{"ast":null,"code":"\"use strict\";\n\n(function () {\n  var enterModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.enterModule : undefined;\n  enterModule && enterModule(module);\n})();\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar __signature__ = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default.signature : function (a) {\n  return a;\n};\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _router = _interopRequireDefault(require(\"next/router\"));\n\nvar _onDemandEntriesUtils = require(\"./on-demand-entries-utils\");\n\nvar _default = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(function* (_ref) {\n    var {\n      assetPrefix\n    } = _ref;\n\n    _router.default.ready(() => {\n      _router.default.events.on('routeChangeComplete', _onDemandEntriesUtils.setupPing.bind(void 0, assetPrefix, () => _router.default.pathname));\n    });\n\n    (0, _onDemandEntriesUtils.setupPing)(assetPrefix, () => _router.default.pathname, _onDemandEntriesUtils.currentPage); // prevent HMR connection from being closed when running tests\n\n    if (!process.env.__NEXT_TEST_MODE) {\n      document.addEventListener('visibilitychange', _event => {\n        var state = document.visibilityState;\n\n        if (state === 'visible') {\n          (0, _onDemandEntriesUtils.setupPing)(assetPrefix, () => _router.default.pathname, true);\n        } else {\n          (0, _onDemandEntriesUtils.closePing)();\n        }\n      });\n      window.addEventListener('beforeunload', () => {\n        (0, _onDemandEntriesUtils.closePing)();\n      });\n    }\n  });\n\n  return function _default(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexports.default = _default;\n;\n\n(function () {\n  var reactHotLoader = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.default : undefined;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(_router, \"_router\", \"/Users/tmarchand/Documents/Projects/taramarchand/node_modules/next/dist/client/dev/on-demand-entries-client.js\");\n  reactHotLoader.register(_default, \"_default\", \"/Users/tmarchand/Documents/Projects/taramarchand/node_modules/next/dist/client/dev/on-demand-entries-client.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal.leaveModule : undefined;\n  leaveModule && leaveModule(module);\n})();","map":{"version":3,"sources":["../../../client/dev/on-demand-entries-client.js"],"names":["Router","setupPing","currentPage","process","document","_event","state","window"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,IAAA,OAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,aAAA,CAAA,CAAA;;AACA,IAAA,qBAAA,GAAA,OAAA,CAAA,2BAAA,CAAA;;;gCAEe,iBAA2B;AAAA,QAApB;AAAP,MAAA;AAAO,KAAoB;;AACxCA,IAAAA,OAAAA,CAAAA,OAAAA,CAAAA,KAAAA,CAAa,MAAM;AACjBA,MAAAA,OAAAA,CAAAA,OAAAA,CAAAA,MAAAA,CAAAA,EAAAA,CAAAA,qBAAAA,EAEEC,qBAAAA,CAAAA,SAAAA,CAAAA,IAAAA,CAAAA,KAAAA,CAAAA,EAAAA,WAAAA,EAAkC,MAAMD,OAAAA,CAAAA,OAAAA,CAF1CA,QAEEC,CAFFD;AADFA,KAAAA;;AAOA,KAAA,GAAA,qBAAA,CAAA,SAAA,EAAA,WAAA,EAAuB,MAAMA,OAAAA,CAAAA,OAAAA,CAA7B,QAAA,EAA8CE,qBAAAA,CAA9C,WAAA,EARwC,CAUxC;;AACA,QAAI,CAACC,OAAO,CAAPA,GAAAA,CAAL,gBAAA,EAAmC;AACjCC,MAAAA,QAAQ,CAARA,gBAAAA,CAAAA,kBAAAA,EAA+CC,MAAD,IAAY;AACxD,YAAMC,KAAK,GAAGF,QAAQ,CAAtB,eAAA;;AACA,YAAIE,KAAK,KAAT,SAAA,EAAyB;AACvB,WAAA,GAAA,qBAAA,CAAA,SAAA,EAAA,WAAA,EAAuB,MAAMN,OAAAA,CAAAA,OAAAA,CAA7B,QAAA,EAAA,IAAA;AADF,SAAA,MAEO;AACL,WAAA,GAAA,qBAAA,CAAA,SAAA;AAEH;AAPDI,OAAAA;AASAG,MAAAA,MAAM,CAANA,gBAAAA,CAAAA,cAAAA,EAAwC,MAAM;AAC5C,SAAA,GAAA,qBAAA,CAAA,SAAA;AADFA,OAAAA;AAIH;;;;;;;;;;;;;;;;;;0BA5BD,O","sourcesContent":["import Router from 'next/router'\nimport { setupPing, currentPage, closePing } from './on-demand-entries-utils'\n\nexport default async ({ assetPrefix }) => {\n  Router.ready(() => {\n    Router.events.on(\n      'routeChangeComplete',\n      setupPing.bind(this, assetPrefix, () => Router.pathname)\n    )\n  })\n\n  setupPing(assetPrefix, () => Router.pathname, currentPage)\n\n  // prevent HMR connection from being closed when running tests\n  if (!process.env.__NEXT_TEST_MODE) {\n    document.addEventListener('visibilitychange', (_event) => {\n      const state = document.visibilityState\n      if (state === 'visible') {\n        setupPing(assetPrefix, () => Router.pathname, true)\n      } else {\n        closePing()\n      }\n    })\n\n    window.addEventListener('beforeunload', () => {\n      closePing()\n    })\n  }\n}\n"]},"metadata":{},"sourceType":"script"}